"use strict";(globalThis.webpackChunkpage_render_service=globalThis.webpackChunkpage_render_service||[]).push([[3027],{3027:(t,e,s)=>{s.r(e),s.d(e,{default:()=>h});var i=s(4705),d=s(8229),n=s(2367);class r extends n.A{constructor(){super(...arguments),(0,i.A)(this,"init",(()=>{if(this.elDisqusWidget=d.A.getElement(this.selector),this.isLoaded=!1,this.throttleSpeed=0,this.elDisqusWidget){var{disqusAccount:t,postId:e}=this.elDisqusWidget.dataset;t&&(this.createAndAppendScript(e,t),this.handleIframe())}})),(0,i.A)(this,"createAndAppendScript",((t,e)=>{var s=document.createElement("script"),i=document.querySelector("#disqus_thread"),d=window.location.href;s.type="text/javascript",s.innerHTML=this.getScriptCode({pageUrl:d,postId:t,disqusAccount:e}),i.append(s)})),(0,i.A)(this,"handleIframe",(()=>{if(this.isLoaded)return clearTimeout(this.disqusTimeout),void this.handleShowDisqus();this.disqusTimeout=setTimeout((()=>{d.A.getElementHeight(this.elDisqusWidget)>0&&(this.isLoaded=!0),this.throttleSpeed+=1,this.handleIframe()}),500)})),(0,i.A)(this,"handleShowDisqus",(()=>{setTimeout((()=>{d.A.getElementHeight(this.elDisqusWidget)>100?d.A.showOpacity(this.elDisqusWidget):d.A.hide(this.elDisqusWidget)}),1e3*this.throttleSpeed)})),(0,i.A)(this,"getScriptCode",(t=>{var{pageUrl:e,postId:s,disqusAccount:i}=t;return"let disqus_config = function() {\n                                          this.page.url = '".concat(e,"';\n                                              this.page.identifier = '").concat(s,"';\n                                        };\n\n                                        (function() {\n                                              let script = document.createElement('script');\n                                                script.src = 'https://").concat(i,".disqus.com/embed.js';\n                                                script.setAttribute('data-timestamp', +new Date());\n                                                (document.head || document.body).appendChild(script);\n                                              })();\n                                              ")}))}}const h=r}}]);