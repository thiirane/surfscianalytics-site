"use strict";(globalThis.webpackChunkpage_render_service=globalThis.webpackChunkpage_render_service||[]).push([[9394,6416],{6416:(t,e,a)=>{a.r(e),a.d(e,{default:()=>p});var i=a(467),n=a(4705),o=a(6746),s=a(8523),r=a(4799),d=a(6090),l=a(7032),u=a(8229),c=a(2367),h="total-box",g="total-text";class A extends c.A{constructor(){var t;super(...arguments),t=this,(0,n.A)(this,"state",{quantity:0}),(0,n.A)(this,"viewProvider",(0,l.A)("ecommerce.viewProvider")),(0,n.A)(this,"init",(0,i.A)((function*(){if(t.updateElements(),t.isCartButtonMounted()){var e=u.A.window.getComputedStyle(t.elBudgeWrapper).color||"#000",a=u.A.window.getComputedStyle(t.elBasket).color||"#000",i=(0,d.T4)(e),n=(0,d.T4)(a);i&&u.A.addClass(t.elBudgeText,"light-color"),n&&u.A.addClass(t.elBasket,"_dark");try{t.state.quantity=yield s.A.provider.cart.getTotalQuantity()}catch(e){t.state.quantity=0}t.setProductQuantityInCart(),t.cartListeners(),s.A.provider.cart.onChange.add(t.handleProductQuantityChange),u.A.on(t.elBasket,"click",t.handleButtonClick)}}))),(0,n.A)(this,"cartListeners",(()=>{if(this.viewProvider===o.ny){var t=u.A.window.localStorage.removeItem.bind(window.localStorage),e=u.A.window.localStorage.setItem.bind(window.localStorage);Storage.prototype.removeItem=e=>{t(e),"stand-alone-checkout-cart"===e&&(this.state.quantity=0,this.setProductQuantityInCart())},Storage.prototype.setItem=(t,a)=>{e(t,a),"stand-alone-checkout-cart"===t&&s.A.provider.cart.getTotalQuantity().then((t=>{this.handleProductQuantityChange({productsQuantity:t})}))}}})),(0,n.A)(this,"isCartButtonMounted",(()=>[this.elBasket,this.elBudge,this.elBudgeText,this.elBudgeWrapper,this.elBasket].some(Boolean))),(0,n.A)(this,"updateElements",(()=>{var t=u.A.getElement(this.selector);this.elBudge=u.A.getElement(".".concat(h),t),this.elBudgeText=u.A.getElement(".".concat(g),t),this.elBudgeWrapper=u.A.getElement(".".concat(h," .total"),t),this.elBasket=u.A.getElement(".".concat("basket"),t)})),(0,n.A)(this,"setProductQuantityInCart",(()=>{if(this.updateElements(),this.state.quantity>0)return this.showTotalBudge(),void u.A.addText(this.elBudgeText,"".concat(this.state.quantity));this.hideTotalBudge(),u.A.addText(this.elBudgeText,"0")})),(0,n.A)(this,"showTotalBudge",(()=>{u.A.updateStyle(this.elBudge,{display:"block"})})),(0,n.A)(this,"hideTotalBudge",(()=>{u.A.updateStyle(this.elBudge,{display:"none"})})),(0,n.A)(this,"handleProductQuantityChange",(t=>{var{productsQuantity:e=0}=t;this.state.quantity=e,this.setProductQuantityInCart()})),(0,n.A)(this,"handleButtonClick",(()=>{(0,r.Le)()}))}}(0,n.A)(A,"refreshCartButtonWidget",function(){var t=(0,i.A)((function*(t){var e=yield s.A.provider.cart.getTotalQuantity(),a=u.A.getElement(".".concat(h),t),i=u.A.getElement(".".concat(g),t);u.A.updateStyle(a,{display:e>0?"block":"none"}),u.A.addText(i,"".concat(e))}));return function(e){return t.apply(this,arguments)}}());const p=A},9394:(t,e,a)=>{a.r(e),a.d(e,{default:()=>i.default});var i=a(6416)}}]);