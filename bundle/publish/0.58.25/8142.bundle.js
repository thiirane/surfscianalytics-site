"use strict";(globalThis.webpackChunkpage_render_service=globalThis.webpackChunkpage_render_service||[]).push([[8142],{8142:(e,t,i)=>{i.r(t),i.d(t,{default:()=>N});var r=i(4705),a=i(765),o=i(4612),n=i(8229),s=i(2367),l=i(1051),d=i(467),c="maxresdefault",h=+(16/9).toFixed(2);const u=e=>{var t=new Image;return t.src=e,new Promise((e=>{t.onload=()=>e(120!==t.width&&90!==t.height),t.onerror=()=>e(!1)}))};const p=function(){var e=(0,d.A)((function*(e){var t="https://vimeo.com/api/oembed.json?url=https://vimeo.com/".concat(e);try{var i=yield fetch(t);return 200===i.status||201===i.status?yield i.json():{}}catch(e){return{}}}));return function(t){return e.apply(this,arguments)}}();const y=function(){var e=(0,d.A)((function*(e){try{var t=yield fetch("https://vimeo.com/api/oembed.json?url=".concat(e));return 200===t.status||201===t.status?yield t.json():{}}catch(e){return{}}}));return function(t){return e.apply(this,arguments)}}();const v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{height:t,width:i,thumbnail_url:r}=e,a=r.split("/"),o=a.at(-2),n=a.at(-1);return n.endsWith(".jpg")&&n!=="".concat(c,".jpg")&&(a[a.length-1]="".concat(c,".jpg")),{height:t,width:i,firstVideoID:o,thumbnailUrl:a.join("/")}};const m=function(){var e=(0,d.A)((function*(e){try{var t=yield fetch("https://www.youtube.com/oembed?url=https://www.youtube.com/watch?list=".concat(e)),i=yield t.json();return v(i)}catch(e){console.error(e)}}));return function(t){return e.apply(this,arguments)}}();const g=(e,t)=>!e&&t?1:0;var w={autopause:0,disablekb:1,rel:0,showinfo:0,resetOnEnd:1,fs:1,iv_load_policy:3,controls:1,mute:1,cc_load_policy:0,autoplay:1,modestbranding:1},f={speed:0,portrait:0,title:0,controls:1};function P(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function A(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?P(Object(i),!0).forEach((function(t){(0,r.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var b=i(8),O=i.n(b),V=i(1505),E=i(9560),k=i(7032),T=i(3333);const I=class{constructor(e,t){var i=this;(0,r.A)(this,"renderVideoOnPage",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],{hash:t,isBackground:r}=i.dataParams,a=n.A.getElement("#v-".concat(t),i.video);if(a&&a.childNodes.length>0)return!0;var o=n.A.createElement("div"),s=n.A.createElement("style");n.A.addHtml(s,"\n      .plyr--video {\n        background: transparent!important;\n        overflow: unset;\n      }\n      .plyr__video-wrapper{\n        background: transparent!important;\n        padding-bottom: 56.25%!important;\n        ".concat(r?"overflow: unset":"","\n      }\n      .plyr__video-embed__container{\n          transform: translateY(0) !important;\n      }\n      .not-background{\n        transform: translateY(0) !important;\n      }\n    ")),n.A.document.head.append(s),e?(n.A.addHtml(o,'\n      <div id="player-'.concat(t,'">\n        <video id="video-').concat(t,'" ></video>\n      </div>\n    ')),a.append(o)):i.showVideoError()})),(0,r.A)(this,"addPreviewImage",(e=>{var{hash:t,provider:i}=this.dataParams,r="#preview-container-".concat(t);this.elPreview=n.A.getElement(r,this.video),this.elPreview&&n.A.on(this.elPreview,"click",(()=>{i===l.xL.VIMEO?e.play().then((()=>e.play())).catch((e=>{console.warn("Can not play vimeo video",e),this.hidePreview()})):e.play()}))})),(0,r.A)(this,"showVideoError",(e=>{var t,i=null==e||null===(t=e.detail)||void 0===t?void 0:t.method;if(this.video&&!1!==(null==e?void 0:e.isTrusted)&&"setPlaybackRate"!==i){var r=n.A.getElement(".video-error-wrapper",this.video),a=n.A.getElement(".video__preview-container",this.video);n.A.show(r),n.A.hide(a)}})),(0,r.A)(this,"connectVideoDefault",(()=>{var{hash:e,isBackground:t,autoplay:i,provider:r,removeControls:a}=this.dataParams,{YOUTUBE:o}=l.xL,s="#video-".concat(e),d=r===o,c={controls:null,loadSprite:!d,muted:!!t||!!i,autoplay:t?1:i,loop:{active:!!t},autopause:0,ratio:"16:9"};this.player=new(O())(s,c);var h={rel:0,fs:t?0:1,controls:a||t?0:1,mute:t?1:i,cc_load_policy:t?0:1,autoplay:i?1:0,modestbranding:t?0:1,origin:n.A.window.location.origin,noCookie:!0},u=d?h:{speed:!t,portrait:!t,title:!t,controls:a||t?0:1,byline:!1,premium:!1,referrerPolicy:null,transparent:!1};return this.player.config[r]=((e,t,i)=>{switch(e){case l.xL.YOUTUBE:return A(A(A({},w),t),i);case l.xL.VIMEO:return A(A(A({},f),t),i);default:return null}})(r,this.player.config[r],u),this.player.on("ready",this.onPlayerReady),this.player.on("playing",this.onPlayerPlaying),this.player.on("ended",this.onPlayerEnded),this.player.on("error",this.showVideoError),(0,T.sR)(this.wrapper,this.resizeVideo,100),this.player})),(0,r.A)(this,"getLoopTimeoutTime",(()=>this.player?Math.round(1e3*(this.player.duration-this.player.currentTime))-1500:0)),(0,r.A)(this,"getTimeCode",(e=>{if(!(0,E.A)(e))return Number(e)||0;var t=/(\d{1,2}h)?(\d{1,2}m)?(\d{1,2}s)?/.exec(e);return 3600*(Number.parseInt(t[1],10)||0)+60*(Number.parseInt(t[2],10)||0)+(Number.parseInt(t[3],10)||0)||0})),(0,r.A)(this,"onPlayerReady",(()=>{this.player.volume=.8,this.dataParams.autoplay&&(this.player.volume=0,this.player.muted=!0,"youtube"===this.dataParams.provider&&this.player.play())})),(0,r.A)(this,"onPlayerEnded",(()=>{clearTimeout(this.loopTimeoutId)})),(0,r.A)(this,"onPlayerPlaying",(()=>{var e=(0,a.A)(this,["dataParams","isBackground"],!1),t=(0,a.A)(this,["dataParams","videoParams"],{});if(this.hidePreview(),e&&this.player){var i=(0,a.A)(t,["list"],null),r=this.getLoopTimeoutTime(),o=i?this.playNextVideoInPlaylist:this.playSingleVideo;this.loopTimeoutId=setTimeout(o,r)}})),(0,r.A)(this,"playNextVideoInPlaylist",(()=>{this.player&&this.player.nextVideo()})),(0,r.A)(this,"playSingleVideo",(()=>{var e=(0,a.A)(this,["dataParams","videoParams","t"],null);this.player.currentTime=this.getTimeCode(e)})),(0,r.A)(this,"hidePreview",(()=>{this.elPreview&&n.A.hide(this.elPreview)})),(0,r.A)(this,"getIframe",(()=>n.A.getElement("iframe",this.video))),(0,r.A)(this,"resizeVideo",(()=>{var e,t,{provider:i,isSliderBg:r,isBackground:a}=this.dataParams,o=this.getIframe(),s=r&&i===l.xL.YOUTUBE?1.1:1,d=this.wrapper.getBoundingClientRect(),c=this.getVideoSize(i,o),{height:u,width:p}=d,{width:y}=c,{height:v}=c,m=+(y/v).toFixed(2);i===l.xL.YOUTUBE&&m<h-.03&&r&&(v-=200);var g=p/y,w=u/v;if(w>g?(e=Math.round(u*s),t=Math.round(w*y*s)):(t=Math.round(p*s),e=Math.round(g*v*s)),i===l.xL.YOUTUBE&&r&&(e+=200),!(0,V.A)(this.videoWidth,t)||!(0,V.A)(this.videoHeight,e)){this.videoWidth=t,this.videoHeight=e;var f=(e-u)/2,P=(t-p)/2;a||o.parentNode.classList.add("not-background"),n.A.updateStyle(o,{height:"".concat(e,"px"),width:"".concat(t,"px"),top:"-".concat(Math.abs(f),"px"),left:"-".concat(Math.abs(P),"px")})}}));var o=(0,k.A)("settings.grid"),{hash:s,isBackground:d,isSliderBg:c}=t;this.video=c||d||!o?e:e.querySelector(".youtube-grid"),this.dataParams=t,this.videoWidth=0,this.videoHeight=0,this.wrapper=c||d?document.querySelector('[data-widget-id="'.concat(s,'"]')):this.video}getVideoSize(e,t){var{width:i,height:r}=t;return{width:i,height:r}}};function _(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function j(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_(Object(i),!0).forEach((function(t){(0,r.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const S=class extends I{constructor(e,t){var i;super(e,t),i=this,(0,r.A)(this,"setYouTubeThumbnail",(e=>{e&&e.includes(c)&&(n.A.updateStyle(this.video,{opacity:0}),u(e).then((t=>{if(this.isPlaylistVideo||!t){var i=e.replace(c,"0"),r=n.A.getElement("img",this.video);r.dataset.src=i,r.setAttribute("src",i)}})).finally((()=>n.A.updateStyle(this.video,{opacity:1}))))})),(0,r.A)(this,"checkIsVideoExist",function(){var e=(0,d.A)((function*(e){if(!e)return!1;var t="https://img.youtube.com/vi/".concat(e,"/0.jpg");return u(t)}));return function(t){return e.apply(this,arguments)}}()),(0,r.A)(this,"setSizeVideo",(0,d.A)((function*(){try{var{id:e}=i.dataParams,t=yield fetch("https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=".concat(e)),{width:r,height:a}=yield t.json();if(r/a<1.5){var o=i.getIframe();o.height=640,o.width=360}}catch(e){console.error(e)}finally{i.resizeVideo()}}))),this.isPlaylistVideo=!1,this.playlistData={height:null,width:null,firstVideoID:null,thumbnailUrl:null}}init(){var e=this;return(0,d.A)((function*(){var t,{id:i,autoplay:r,color:a,removeControls:o,isBackground:s,isSliderBg:l,src:d,fs:c,videoParams:h}=e.dataParams,u=null==h?void 0:h.list,p=!!u;p&&(e.playlistData=yield m(u),e.isPlaylistVideo=!0);var y=yield e.checkIsVideoExist(i||e.playlistData.firstVideoID),v=e.renderVideoOnPage(y);y&&!v&&(e.player=e.connectVideoDefault(),e.setYouTubeThumbnail(p?e.playlistData.thumbnailUrl:d),e.addPreviewImage(e.player),e.player.source={type:"video",sources:[{src:p?e.playlistData.firstVideoID:i,provider:"youtube"}]},e.player.config.youtube=j(j({},e.player.config.youtube),{},{autopause:0,color:a,disablekb:1,rel:0,showinfo:0,resetOnEnd:1,fs:g(s,c),iv_load_policy:3,controls:o||s?0:1,mute:s?1:r,cc_load_policy:s&&0,autoplay:s&&1,modestbranding:s&&1,origin:n.A.window.location.origin},p&&{listType:"playlist",list:u}),e.player.elements.poster.style.display="none",null===(t=e.player.elements.container)||void 0===t||t.addEventListener("ready",(()=>{s||l?e.setSizeVideo():e.resizeVideo()})))}))()}};var D=!1,x=!1,L=[];const B=class extends I{constructor(){var e;super(...arguments),e=this,(0,r.A)(this,"init",(0,d.A)((function*(){e.renderVideoOnPage()||(x?e.initPlayer():(e=>{var t,i,r=new Promise((e=>{i=e}));if(L.push(i),D)return r.then(e);D=!0;var a=document.createElement("script");a.src="https://player.vimeo.com/api/player.js",a.async=!0,a.onload=()=>{x=!0,L.forEach((e=>e(!0)))};var o=document.querySelectorAll("script")[0];null==o||null===(t=o.parentNode)||void 0===t||t.insertBefore(a,o),r.then(e)})(e.initPlayer))}))),(0,r.A)(this,"initPlayer",(()=>{var{hash:t,autoplay:i,isBackground:r,isSliderBg:a,initUrl:o}=this.dataParams,s=n.A.getElement("#v-".concat(t),this.video);s.textContent="",this.player=new window.Vimeo.Player(s,{url:o,autoplay:!!i,loop:r||a,muted:!!i||r||a,background:r,autopause:!1}),this.player.on("play",(()=>{this.hidePreview()})),this.player.on("loaded",(0,d.A)((function*(){var t=yield e.player.getVideoId();e.addPreviewImage(e.player),e.addThumbSlideClone(),r||a?(e.player.play(),e.setSizeVideo(t)):e.resizeVideo()})))})),(0,r.A)(this,"addThumbSlideClone",(()=>{var{hash:e,initUrl:t}=this.dataParams,i=n.A.getCollection(".slick-cloned #v-".concat(e));i&&y(t).then((e=>{var{thumbnail_url:t}=e;for(var r of i){var a=document.createElement("img");a.src=t,r.append(a)}}))})),(0,r.A)(this,"setSizeVideo",function(){var t=(0,d.A)((function*(t){var{width:i=426,height:r=240}=yield p(t),a=e.getIframe();a.height=r,a.width=i,e.resizeVideo()}));return function(e){return t.apply(this,arguments)}}())}};var C=()=>{var{queueInitDMVideo:e}=window;if(e){for(var t of e)t();window.queueInitDMVideo=[]}};const M=class extends I{constructor(){var e;super(...arguments),e=this,(0,r.A)(this,"initPlayer",(0,d.A)((function*(){e.player=yield e.connectDailymotionPlayer(),e.addPreviewImage(e.player)}))),(0,r.A)(this,"addThumbSlideClone",(()=>{var{hash:e}=this.dataParams,t=n.A.getCollection("#v-".concat(e));if(t){var i=window.innerWidth>720;for(var r of t){var a=document.createElement("img");a.src=i?this.player.thumbDesktop:this.player.thumbMobile,r.append(a)}}})),(0,r.A)(this,"onVideoEnd",(()=>{var{isBackground:e}=this.dataParams;e&&this.player.play()})),(0,r.A)(this,"connectDailymotionPlayer",(0,d.A)((function*(){var t,i,{id:r,hash:a,autoplay:o,fs:s,isBackground:l,playlistId:d}=e.dataParams,c=e.isPostList?1:s,h=n.A.getElement("#v-".concat(a),e.video);return h.id+=e.video.closest(".slick-cloned")?"-cloned":"-origin",e.player=yield n.A.window.dailymotion.createPlayer(h.id,{video:r,playlist:d,width:"100%",height:"100%",loop:l,params:{autoplay:!!o,loop:l,mute:!!l||!!o,controls:c||o,queue:!1,"sharing-enable":!1}}),o?e.player.play():e.player.pause(),l&&(e.player&&e.onPlayerPlayBack(),e.player.on("playback_ready",e.onPlayerPlayBack)),e.player.on(null===(t=window.dailymotion)||void 0===t?void 0:t.events.PLAYER_START,e.onPlayerPlaying),e.player.on(null===(i=window.dailymotion)||void 0===i?void 0:i.events.PLAYER_END,e.onVideoEnd),e.player.on("video_end",e.onPlayerEnded),(0,T.sR)(e.wrapper,e.resizeVideo,100),e.player}))),(0,r.A)(this,"onPlayerPlayBack",(0,d.A)((function*(){var{id:t}=e.dataParams;try{var i=yield fetch("https://api.dailymotion.com/video/".concat(t,"?fields=thumbnail_1080_url%2Cthumbnail_480_url%2Cwidth%2Cheight%2Caspect_ratio")),{height:r,width:a,thumbnail_1080_url:o,thumbnail_480_url:n}=yield i.json();e.player.height=r,e.player.width=a,e.player.thumbDesktop=o,e.player.thumbMobile=n,e.addThumbSlideClone()}catch(e){console.error(e)}finally{e.resizeVideo()}}))),(0,r.A)(this,"onPlayerPlaying",(()=>{var e=(0,a.A)(this,["dataParams","isBackground"],!1),t=(0,a.A)(this,["dataParams","autoplay"],!1);if(this.hidePreview(),e||t){var i=this.getLoopTimeoutTime();this.loopTimeoutId=setTimeout(this.playSingleVideo,i)}})),(0,r.A)(this,"playSingleVideo",(()=>{var e=(0,a.A)(this,["dataParams","videoParams","t"]),t=this.getTimeCode(e);this.player.seek(t||0)}))}init(e){var t;this.isPostList=(0,a.A)(e,"isPostList",!1),null!==(t=n.A.window.dailymotion)&&void 0!==t&&t.createPlayer?this.initPlayer():(e=>{var t;if(window.isLoadingDMScript)window.queueInitDMVideo.push(e);else{window.isLoadingDMScript=!0,window.dmAsyncInit=C,window.queueInitDMVideo=[e],window.dailymotion={onScriptLoaded:()=>{C()}};var i=document.createElement("script");i.src="https://geo.dailymotion.com/libs/player.js",i.async=!0;var r=document.querySelectorAll("script")[0];null==r||null===(t=r.parentNode)||void 0===t||t.insertBefore(i,r)}})(this.initPlayer)}};const U=class{init(e){if(!e)return null;if(this.selector=e,this.settings=JSON.parse((0,a.A)(this.selector,"dataset.settings",{})),(0,o.A)(this.settings))return null;var{provider:t,isSliderBg:i,hash:r}=this.settings;if(i){var s=n.A.getElement(".slick-slide-".concat(r,".slick-cloned"));if(s&&s.contains(this.selector))return null}switch(t){case l.xL.YOUTUBE:return new S(this.selector,this.settings);case l.xL.VIMEO:return new B(this.selector,this.settings);case l.xL.DAILYMOTION:case l.xL.DAILYMOTION_FIX:return new M(this.selector,this.settings);default:return null}}};class z extends s.A{constructor(){super(...arguments),(0,r.A)(this,"init",(e=>{var t=(0,a.A)(e,"isPostList",!1);if(this.elVideos=n.A.getCollection(this.selector),!(0,o.A)(this.elVideos))for(var i=new U,r=0;r<this.elVideos.length;r+=1){var s=this.elVideos[r],l=i.init(s);l&&l.init({isPostList:t})}}))}}const N=z}}]);