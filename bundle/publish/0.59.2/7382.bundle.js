"use strict";(globalThis.webpackChunkpage_render_service=globalThis.webpackChunkpage_render_service||[]).push([[7382,3891],{4416:(t,e,i)=>{i.d(e,{A:()=>s});const s=t=>Number.isNaN(t)},3891:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(7032);const a=()=>{if((0,s.A)("isScreenshot",!1))return!1;var t=(0,s.A)("settings.animation");return!(null==t||!t.enabled||null==t||!t.value)}},7382:(t,e,i)=>{i.r(e),i.d(e,{default:()=>A});var s=i(4705),a=i(8229),n=i(2367),r=i(2621),o=i(4416),d=i(5058),h=i(3891);const l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return new Date(new Date(t).toLocaleString("en-US",{timeZone:"UTC"}))};const u=t=>({days:Math.floor(t/864e5),hours:Math.floor(t%864e5/36e5),minutes:Math.floor(t%36e5/6e4),seconds:Math.floor(t%6e4/1e3)});const c=(t,e)=>{if(e){var i=t<10?"0".concat(t):Number(t).toString(),[s,a]=[...e];if(a){var[n,r]=i;s.innerHTML=n,a.innerHTML=r}else s.innerHTML=i}};const g=class{constructor(t){(0,s.A)(this,"init",(()=>{if((0,r.A)(this.widget)){var{settings:t}=this.widget.dataset,e=(0,d.A)(t)?{}:JSON.parse(t);this.dueDate=new Date(null==e?void 0:e.dueDate).getTime(),e.isProjectGrid?(this.days=a.A.getCollection('[data-number="days"] .slate__leaf span',this.widget),this.hours=a.A.getCollection('[data-number="hours"] .slate__leaf span',this.widget),this.minutes=a.A.getCollection('[data-number="minutes"] .slate__leaf span',this.widget),this.seconds=a.A.getCollection('[data-number="seconds"] .slate__leaf span',this.widget)):(this.days=a.A.getCollection('[data-number="days"] .public-DraftStyleDefault-ltr [data-text="true"]',this.widget),this.hours=a.A.getCollection('[data-number="hours"] .public-DraftStyleDefault-ltr [data-text="true"]',this.widget),this.minutes=a.A.getCollection('[data-number="minutes"] .public-DraftStyleDefault-ltr [data-text="true"]',this.widget),this.seconds=a.A.getCollection('[data-number="seconds"] .public-DraftStyleDefault-ltr [data-text="true"]',this.widget)),this.isLoaded=!1,this.withAnimation=(0,h.A)(),this.initWidget()}})),(0,s.A)(this,"initWidget",(()=>{if(!(0,o.A)(this.dueDate)){var t=l(),e=this.dueDate-t;e<0?this.finishCountdown():(this.drawNumbers(u(e)),this.countdownTimer())}})),(0,s.A)(this,"countdownTimer",(()=>{this.intervalId=setInterval((()=>{var t=l(),e=this.dueDate-t;if(!this.withAnimation&&!this.isLoaded&&e>=0&&(a.A.showOpacity(this.widget),this.isLoaded=!0),e<0)return this.finishCountdown(),void clearInterval(this.intervalId);this.drawNumbers(u(e))}),1e3)})),(0,s.A)(this,"drawNumbers",(t=>{var{days:e,hours:i,minutes:s,seconds:a}=t;c(e,this.days),c(i,this.hours),c(s,this.minutes),c(a,this.seconds)})),(0,s.A)(this,"finishCountdown",(()=>{a.A.addClass(this.widget,"_finished"),this.withAnimation||setTimeout((()=>{a.A.showOpacity(this.widget)}),150)})),this.widget=t}};class w extends n.A{constructor(){super(...arguments),(0,s.A)(this,"init",(()=>{[...a.A.getCollection(this.selector)].forEach((t=>{new g(t).init()}))}))}}const A=w}}]);