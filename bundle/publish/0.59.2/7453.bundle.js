(globalThis.webpackChunkpage_render_service=globalThis.webpackChunkpage_render_service||[]).push([[7453,3891],{8319:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});const n=(...t)=>{let e=t.filter(Boolean);return 0===e.length?t=>t:(e=e.flat(),1===e.length?e[0]:e.reduce(((t,e)=>(...r)=>t(e.apply(void 0,r)))))}},9817:(t,e,r)=>{"use strict";r.d(e,{Ko:()=>p,XG:()=>u,dk:()=>c});var n=r(4705),o=r(6718),i=r(1060);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){(0,n.A)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var c={CIRCLE:"CIRCLE"},u={SQUARE_1:"SQUARE_1"},l=(i.Ul,{backgroundColor:"rgba(255,255,255, 0)",bgBorderColor:"rgb(0,0,0)",bgBorderWidth:0}),p=(a(a({},l),{},{itemBackgroundColor:"rgba(255,255,255, 0)",itemBorderColor:"rgb(0,0,0)",itemBorderWidth:0}),()=>({label:o.M.t("se.bo.booking_catalogue.category_all_products"),value:"defaultCategory"}))},1060:(t,e,r)=>{"use strict";r.d(e,{Jl:()=>i,Ul:()=>o,cd:()=>n});var n="feed",o="grid",i="masonry"},8332:(t,e,r)=>{"use strict";r.d(e,{A:()=>A});var n=r(467),o=r(4705),i=r(8319),s=r(6529),a=r(3273),c=r(7032),u=r(4663),l=r(8229),p=r(2726);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){(0,o.A)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const h=class{constructor(t){this.settings=t||{},this.id=null,this.categoryId=null,this.image=null,this.name=null,this.shortDescription=null,this.description=null,this.priceFormatted=null,this.duration=null}get withImage(){return!!this.settings.showImage}get withName(){return!!this.settings.showName&&!!this.name}get withShortDescription(){return!!this.settings.showShortDescription&&!!this.shortDescription}get withDescription(){return!!this.settings.showDescription&&!!this.description}get withPrice(){return!!this.settings.showPrice&&!!this.priceFormatted}get withDuration(){return!!this.settings.showDuration&&!!this.duration}updateSettings(t){this.settings=g(g({},this.settings),t)}};var f=r(2154);function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){(0,o.A)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var y=t=>({headers:{unverified_product_instance_id:t}});const m=class{constructor(){var t=this;(0,o.A)(this,"isReady",(0,a.A)((()=>new Promise((t=>{this.apiLoaded?t(!0):this.apiLoadedResolver=t}))))),(0,o.A)(this,"getCategories",(0,n.A)((function*(){yield t.isReady();var e=(yield t.fetchCategoriesMemoize(t.bookingId,t.companyId)).map((t=>{var{id:e,name:r}=t;return{id:e,name:r}}));return{items:e,total:e.length}}))),(0,o.A)(this,"getProduct",function(){var e=(0,n.A)((function*(e,r){yield t.isReady();var n=((yield t.fetchProductsMemoize(t.bookingId,t.companyId))||[]).find((t=>(null==t?void 0:t.id)===e));if(!n)throw new Error("404");if(n.hidden)throw new Error("hidden");return t.transformProduct(n,r)}));return function(t,r){return e.apply(this,arguments)}}()),(0,o.A)(this,"getProducts",function(){var e=(0,n.A)((function*(e){yield t.isReady();var r,n,{offset:o=0,limit:s=1e3,category:a}=e||{},c=(yield t.fetchProductsMemoize(t.bookingId,t.companyId)).filter((t=>{var{hidden:e}=t;return!e})),u=(0,i.A)([e=>e.map((e=>t.transformProduct(e))),t=>a?t.filter((t=>{var{category_id:e}=t;return e===a})):t])(c),l=u.slice(o,o+s);return v(v(v({},e),u),{},{total:a?(r=c,n=a,r.filter((t=>{var{category_id:e}=t;return e===n})).length):c.length,items:l})}));return function(t){return e.apply(this,arguments)}}()),(0,o.A)(this,"transformProduct",((t,e)=>{var{bookingId:r}=this,n=new h(v({bookingId:r},e)),{id:o,category_id:i,image_url:s,name:a,tagline:c,description:u,price_description:l,duration:p}=t;return n.id=o,n.categoryId=i,n.image=s,n.name=a,n.shortDescription=c,n.description=u,n.priceFormatted=l,n.duration=p,n}));var e=(0,c.A)("booking.bookingId");if(e){this.bookingId=e,this.companyId=(0,c.A)("booking.ecomCompanyId"),this.bookingTag=(0,c.A)("booking.bookingTag")||f.D2,this.urls={},this.fetchProductsMemoize=(0,a.A)(function(){var e=(0,n.A)((function*(e,r){var{bookingApiUrl:n}=t.urls,o=p.A.allProducts(n,e),i=y(r),s=yield l.A.window.fetch(o,i);if(!s.ok)throw new Error(s.status.toString(10));return s.json()}));return function(t,r){return e.apply(this,arguments)}}()),this.fetchCategoriesMemoize=(0,a.A)(function(){var e=(0,n.A)((function*(e,r){var{bookingApiUrl:n}=t.urls,o=p.A.categories(n,e),i=y(r),s=yield l.A.window.fetch(o,i);if(!s.ok)throw new Error(s.status.toString(10));return s.json()}));return function(t,r){return e.apply(this,arguments)}}());var r=function(){var e=(0,n.A)((function*(){try{var e=yield(0,u.A)();if(!e)return;t.urls=e,t.apiLoaded=!0,(0,s.A)(t.apiLoadedResolver)&&t.apiLoadedResolver(!0)}catch(t){console.error(t)}}));return function(){return e.apply(this,arguments)}}();r()}}};const A=new class{constructor(){this.provider=new m}}},3891:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var n=r(7032);const o=()=>{if((0,n.A)("isScreenshot",!1))return!1;var t=(0,n.A)("settings.animation");return!(null==t||!t.enabled||null==t||!t.value)}},4027:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var n=r(8229);const o=t=>{var e=n.A.getCssVar(t),r=Number.parseFloat(e);return Number.isNaN(r)?0:r}},5697:(t,e,r)=>{"use strict";r.d(e,{cC:()=>a,jg:()=>o,nT:()=>s,p9:()=>i,sW:()=>n,y1:()=>c});var n="booking__img",o="no-image",i="booking__btn",s={PORTRAIT_0667:2/3,PORTRAIT_075:3/4,SQUARE_1:1,LANDSCAPE_1333:4/3,LANDSCAPE_15:1.5},a=12,c=2.4},4622:(t,e,r)=>{"use strict";r.d(e,{Pm:()=>a,oU:()=>i,vv:()=>l});var n=r(6090),o=r(4628);const i=t=>{var{color:e,background:r,colorContrast:i}=t;return r&&!(0,n.i0)(r)?(0,o.XB)(i)?(0,n.$r)(i):i:(0,o.XB)(e)?(0,n.$r)(e):e};var s=r(5697);const a=t=>{var e=s.nT[t]||1;return{height:0,paddingTop:"calc(100% / ".concat(e,")")}};var c=r(9817),u=r(4027);const l=t=>{var{widgetWidth:e=0,imageShape:r=c.dk.CIRCLE,imageRatio:n=c.XG.SQUARE_1}=t,o=s.nT[n]||1,i=(0,u.A)("--text_fontSize"),a=(0,u.A)("--text_lineHeight"),l=(0,u.A)("--title_subHeading_fontSize"),p=(0,u.A)("--title_subHeading_lineHeight"),d=(0,u.A)("--btn_primary_fontSize"),g=i*a,h={photo:r===c.dk.CIRCLE?0:e/o,name:g,shortDescription:g,description:g,price:l*p,duration:l*p,button:s.cC+d*s.y1};return Object.keys(h).reduce(((t,e)=>t+(h[e]||0)),0)}},6618:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var n=r(4705),o=r(9817),i=r(7032),s=r(8229),a=r(2859),c=r(5697),u=r(4622);const l=class{get modelSettings(){var t;return(null===(t=this.model)||void 0===t?void 0:t.settings)||{}}constructor(t,e){(0,n.A)(this,"element",null),(0,n.A)(this,"model",{}),(0,n.A)(this,"settings",{}),(0,n.A)(this,"init",(()=>{this.initBookingButton(),this.applyColorStyles(),this.applyBackgroundStyles(),this.initLazyLoad()})),(0,n.A)(this,"initBookingButton",(()=>{var{bookingPageUrl:t}=this.settings,{id:e}=this.model||{};!this.isBackupMode&&this.elBookingButton&&s.A.on(this.elBookingButton,"click",(()=>{s.A.window.location.assign("/".concat(t,"/service-").concat(e))}))})),(0,n.A)(this,"initLazyLoad",(()=>{this.elImageWrapper&&(this.elImage?(this.elImage.onerror=()=>{s.A.addClass(this.elImageWrapper,c.jg)},setTimeout((()=>(0,a.A)()),0)):s.A.addClass(this.elImageWrapper,c.jg))})),(0,n.A)(this,"applyColorStyles",(()=>{var{colors:t}=this.settings,e=(0,u.oU)(t||{});s.A.updateStyle(this.element,{color:e})})),(0,n.A)(this,"applyBackgroundStyles",(()=>{var{imageShape:t,imageRatio:e}=this.modelSettings;if(this.elImageWrapper&&t!==o.dk.CIRCLE){var r=(0,u.Pm)(e);s.A.updateStyle(this.elImageWrapper,r)}})),this.element=t,this.model=e,this.elImageWrapper=s.A.getElement(".".concat(c.sW),this.element),this.elImage=s.A.getElement(".".concat(c.sW," > img"),this.element),this.elBookingButton=s.A.getElement(".".concat(c.p9),this.element),this.isBackupMode=(0,i.A)("isBackup",!1);try{this.settings=t.dataset.settings?JSON.parse(t.dataset.settings):{}}catch(t){console.error(t)}}}},2665:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>v});var n=r(467),o=r(4705),i=r(4612),s=r(5058),a=r(8332),c=r(3891),u=r(7032),l=r(2902),p=r(8229),d=r(2367),g=r(4670),h=r(4622),f=r(6618);class b extends d.A{constructor(){var t;super(...arguments),t=this,(0,o.A)(this,"init",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.A.document,r=p.A.getCollection(t.selector,e),n=(0,c.A)(),o=(0,u.A)("settings.grid");(0,i.A)(r)||[...r].forEach((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{settings:r}=e.dataset;try{var i=JSON.parse(r),s=o?e.children[0]:e;t.initProduct(s,i,n)}catch(t){console.error(t)}}))})),(0,o.A)(this,"initProduct",((t,e,r)=>{var{hash:o,productId:i,imageShape:c,imageRatio:u}=e,d=p.A.getElement("#booking-product-template-".concat(o)),b=p.A.getElement("#booking-product-retry-".concat(o));if(d){var v=new g.A(d,{imports:{isNil:s.A}}),y=b?new g.A(b):null,m=function(){var o=(0,n.A)((function*(){p.A.addHtml(t,""),p.A.addClass(t,"spinner");var n=p.A.getElementWidth(t),o=(0,h.vv)({widgetWidth:n,imageShape:c,imageRatio:u});p.A.updateStyle(t,{minHeight:"".concat(o,"px")}),i||(p.A.removeClass(t,"spinner"),p.A.addHtml(t,""));try{var s=yield a.A.provider.getProduct(i,e);if(p.A.removeClass(t,"spinner"),p.A.updateStyle(t,{minHeight:null}),p.A.addHtml(t,v.render({product:s})),new f.A(p.A.getElement(".booking",t),s).init(),r){var d=p.A.getElement(".booking",t);(0,l.P4)(d)}}catch(e){console.error(e);var g="404"===e.message,b="hidden"===e.message;p.A.removeClass(t,"spinner"),!y||g||b?p.A.addHtml(t,""):(p.A.addHtml(t,y.render({items:[1],itemClassName:"gallery-item"})),p.A.on(p.A.getElement("._try-btn",t),"click",m))}}));return function(){return o.apply(this,arguments)}}();m()}}))}}const v=b},4670:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var n=r(4705),o=r(872),i=r.n(o);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}const a=class{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.A)(this,"render",(t=>this.compiled?this.compiled(t):null)),t&&(this.compiled=i()(t.innerHTML,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){(0,n.A)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({interpolate:/{{=([\S\s]+?)}}/g,evaluate:/{{([\S\s]+?)}}/g},e)),t.remove())}}},7217:(t,e,r)=>{var n=r(3702),o=r(80),i=r(4739),s=r(8655),a=r(1175);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,t.exports=c},3729:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}},6547:(t,e,r)=>{var n=r(3360),o=r(5288),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var s=t[e];i.call(t,e)&&o(s,r)&&(void 0!==r||e in t)||n(t,e,r)}},4733:(t,e,r)=>{var n=r(1791),o=r(5950);t.exports=function(t,e){return t&&n(e,o(e),t)}},3838:(t,e,r)=>{var n=r(1791),o=r(7241);t.exports=function(t,e){return t&&n(e,o(e),t)}},3360:(t,e,r)=>{var n=r(3243);t.exports=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},9999:(t,e,r)=>{var n=r(7217),o=r(3729),i=r(6547),s=r(4733),a=r(3838),c=r(3290),u=r(3007),l=r(2271),p=r(8948),d=r(2),g=r(3349),h=r(5861),f=r(6189),b=r(7199),v=r(5529),y=r(6449),m=r(3656),A=r(7730),j=r(3805),O=r(8440),w=r(5950),P=r(7241),k="[object Arguments]",S="[object Function]",_="[object Object]",C={};C[k]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[_]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[S]=C["[object WeakMap]"]=!1,t.exports=function t(e,r,x,E,I,D){var B,R=1&r,L=2&r,T=4&r;if(x&&(B=I?x(e,E,I,D):x(e)),void 0!==B)return B;if(!j(e))return e;var U=y(e);if(U){if(B=f(e),!R)return u(e,B)}else{var W=h(e),N=W==S||"[object GeneratorFunction]"==W;if(m(e))return c(e,R);if(W==_||W==k||N&&!I){if(B=L||N?{}:v(e),!R)return L?p(e,a(B,e)):l(e,s(B,e))}else{if(!C[W])return I?e:{};B=b(e,W,R)}}D||(D=new n);var H=D.get(e);if(H)return H;D.set(e,B),O(e)?e.forEach((function(n){B.add(t(n,r,x,n,e,D))})):A(e)&&e.forEach((function(n,o){B.set(o,t(n,r,x,o,e,D))}));var M=U?void 0:(T?L?g:d:L?P:w)(e);return o(M||e,(function(n,o){M&&(n=e[o=n]),i(B,o,t(n,r,x,o,e,D))})),B}},9344:(t,e,r)=>{var n=r(3805),o=Object.create,i=function(){function t(){}return function(e){if(!n(e))return{};if(o)return o(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();t.exports=i},3290:(t,e,r)=>{t=r.nmd(t);var n=r(9325),o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,s=i&&i.exports===o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=a?a(r):new t.constructor(r);return t.copy(n),n}},3007:t=>{t.exports=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}},1791:(t,e,r)=>{var n=r(6547),o=r(3360);t.exports=function(t,e,r,i){var s=!r;r||(r={});for(var a=-1,c=e.length;++a<c;){var u=e[a],l=i?i(r[u],t[u],u,r,t):void 0;void 0===l&&(l=t[u]),s?o(r,u,l):n(r,u,l)}return r}},2271:(t,e,r)=>{var n=r(1791),o=r(4664);t.exports=function(t,e){return n(t,o(t),e)}},8948:(t,e,r)=>{var n=r(1791),o=r(6375);t.exports=function(t,e){return n(t,o(t),e)}},3243:(t,e,r)=>{var n=r(6110),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},4840:(t,e,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=n},2:(t,e,r)=>{var n=r(4335)(Object.keys,Object);t.exports=n},3349:t=>{t.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}},6110:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},4664:t=>{t.exports=function(){return[]}},6375:t=>{t.exports=function(){return[]}},6189:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var r=t.length,n=new t.constructor(r);return r&&"string"==typeof t[0]&&e.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},7199:t=>{t.exports=function(t){return t}},5529:(t,e,r)=>{var n=r(9344),o=r(8879),i=r(5527);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:n(o(t))}},9325:(t,e,r)=>{var n=r(4840),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},2629:(t,e,r)=>{var n=r(9999);t.exports=function(t){return n(t,4)}},7730:t=>{t.exports=function(){return!1}},8440:t=>{t.exports=function(){return!1}},7241:t=>{t.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}}}]);